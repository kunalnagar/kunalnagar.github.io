<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Building a YouTube to Mp3 converter with Node.js" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <title>YouTube to Mp3 converter - Kunal Nagar | Frontend Developer</title>
    <meta
      property="og:image"
      content="https://kunalnagar.in/assets/img/post.png"
    />
    <meta property="og:title" content="YouTube to Mp3 converter - Kunal Nagar | Frontend Developer" />
    <meta property="og:description" content="Building a YouTube to Mp3 converter with Node.js" />
    <meta property="og:url" content="https://kunalnagar.in/blog/youtube-to-mp3-converter/" />
    <meta property="og:type" content="article" />
    <meta name="robots" content="index, follow" />
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"
    ></script>
  </head>
  <body>
    <main>
      <nav>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/assets/downloads/Resume-KunalNagar.pdf">Resume</a></li>
    <li><a href="/foss">Open Source</a></li>
    <li><a href="/blog">Blog</a></li>
  </ul>
</nav>

      <div class="page-blog-single">
        <h1>YouTube to Mp3 converter</h1>
        <time>February 24, 2018</time>
        <article><p>So my parents listen to music on YouTube. Because apparently, services like <a href="https://www.saavn.com/">Saavn</a> or <a href="https://gaana.com/">Gaana</a> don’t make sense to them. And honestly, I can’t blame them. They’re gonna use what seems familiar to them.</p>

<p>One day they asked me - how can I download this song to my phone and listen to it without opening the YouTube app? And I suggested numerous YouTube to Mp3 converters on the internet. The thing I missed was that my parents cannot differentiate between an actual download button and the one that is loaded with ads. Unfortunately, a lot of these free services have ads loaded on them and that causes popups like this that send my parents into a frenzy.</p>

<p>Hence, I decided to create a converter for them that is ad-free and does the job. You enter a URL, click Convert and you get an mp3 file to download. From here on, I will be discussing how to build such a thing and what is the concept behind these converters and how they work. So if you’re not interested, shoo off.</p>

<p>Alright. You’re interested in how to build such a thing. You can do this in any technology you want. I will be discussing the business logic first and then suggest doing it in Node.js - because that’s how I did it.</p>

<h2 id="business-logic">Business Logic</h2>

<p>A YouTube to Mp3 converter is quite simple, actually.</p>

<ul>
  <li>You use the YouTube API to send a URL and it sends you back a list of formats that the video is available in based on the quality when it was uploaded.</li>
  <li>It returns a couple of standard formats like mp4, mov etc and one format called m4a.</li>
  <li>We download that m4a and then use ffmpeg to convert it to mp3</li>
  <li>And we’re done.</li>
</ul>

<h2 id="implementing-in-nodejs">Implementing in Node.js</h2>

<p>Unless you’re really passionate about building this thing out, I would recommend using the already built Node packages out there for downloading and converting YouTube videos. There are node packages for doing this thing entirely as well. But you’re here to learn, so let’s convert out Business Logic to code. Here are the packages you’ll need:</p>

<ul>
  <li><a href="https://github.com/fent/node-ytdl-core">node-ytdl-core</a> for getting the YouTube info for a particular URL</li>
  <li><a href="https://github.com/fluent-ffmpeg/node-fluent-ffmpeg">node-fluent-ffmpeg</a> to convert the received m4a file to mp3</li>
</ul>

<p>As far as the backend, we’ll be using <a href="https://expressjs.com/">ExpressJS</a> hosted on <a href="https://heroku.com">Heroku</a></p>

<p>You’ll need to install <a href="https://www.ffmpeg.org/">ffmpeg</a> on Heroku first for the node package to work. For that, you’ll need a <a href="https://devcenter.heroku.com/articles/buildpacks">Heroku Buildpack</a>. I used <a href="https://github.com/jonathanong/heroku-buildpack-ffmpeg-latest">this one</a>. Basically, Heroku Buildpacks allow you to specify the technologies you will need for a specific project. By default, if you push Node.js code to Heroku, a Node.js Buildpack is automatically applied to your project. You can check out all the Buildpacks in your project on it’s Settings page.</p>

<p>If you’re working on this locally, you’ll need to install ffmpeg on your machine as well. Here’s how you <a href="https://github.com/fluent-ffmpeg/node-fluent-ffmpeg/wiki/Installing-ffmpeg-on-Mac-OS-X">install it on a mac</a>.</p>

<p>I’m not going to give away the code here, so that’s for you to figure out. I have suggested all the packages you might need and where to host it as well.</p>
</article>
      </div>
      <footer>
  <link
    href="https://fonts.googleapis.com/css?family=Lato:700|Noto+Sans:400,700&display=swap"
    rel="stylesheet"
  />
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-51202219-2']);
    _gaq.push(['_trackPageview']);
    (function () {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src =
        ('https:' == document.location.protocol
          ? 'https://ssl'
          : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script src="/assets/js/main.js"></script>
</footer>

    </main>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/css/lightbox.min.css"
    />
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"
      async
      defer
    ></script>
  </body>
</html>
