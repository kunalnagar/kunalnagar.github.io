<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Learn how to setup a Jekyll development environment using Docker" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <title>Setup a Jekyll development environment with Docker - Kunal Nagar | Frontend Developer Toronto</title>
    <meta
      property="og:image"
      content="https://kunalnagar.in/assets/img/post.png"
    />
    <meta property="og:title" content="Setup a Jekyll development environment with Docker - Kunal Nagar | Frontend Developer Toronto" />
    <meta property="og:description" content="Learn how to setup a Jekyll development environment using Docker" />
    <meta property="og:url" content="https://kunalnagar.in/blog/setup-docker-jekyll-dev-environment/" />
    <meta property="og:type" content="article" />
    <meta name="robots" content="index, follow" />
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"
    ></script>
  </head>
  <body>
    <main>
      <nav>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/assets/downloads/Resume-KunalNagar.pdf">Resume</a></li>
    <li><a href="/foss">Open Source</a></li>
    <li><a href="/blog">Blog</a></li>
  </ul>
</nav>

      <div class="page-blog-single">
        <h1>Setup a Jekyll development environment with Docker</h1>
        <time>December 14, 2019</time>
        <article><p>Most recently, I’ve been converting all my development environments to Docker. The primary reason for doing this stemmed from the frustration of installing multiple dependencies on my Mac and trying to keep them up-to-date.</p>

<p>This guide assumes that you have a basic knowledge of Jekyll, Docker and are comfortable working with the Terminal. If not, I would highly recommend that you keep reading as I try to provide documentation links when possible.</p>

<h3 id="requirements">Requirements</h3>

<p>Here are a few requirements to follow along:</p>

<ul>
  <li><a href="https://github.com/kunalnagar/kunalnagar.in">Jekyll site</a></li>
  <li><a href="https://docs.docker.com/v17.09/engine/installation/">Install Docker</a> on your development machine</li>
  <li><a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)">Bash/ZSH Terminal</a></li>
</ul>

<h3 id="step-1">Step 1</h3>

<p>Let’s start off with the fact that you have the code for a Jekyll site on your computer. It could be yours or anyone else’s for that matter.</p>

<!-- prettier-ignore -->
<p><a href="https://i.imgur.com/oiKnu70.png" aria-label="Screenshot showing cloned repository in VSCode" data-lightbox="https://i.imgur.com/oiKnu70.png" class="lightbox-img">
  <img src="https://i.imgur.com/oiKnu70.png" alt="Screenshot showing cloned repository in VSCode" />
</a></p>

<p>With Docker, we can setup a development environment to run this Jekyll site so we don’t have to install unnecessary dependencies on our computer.</p>

<h3 id="step-2">Step 2</h3>

<p>It’s time to set up our <code class="highlighter-rouge">Dockerfile</code> and <code class="highlighter-rouge">docker-compose.yml</code> files. The <code class="highlighter-rouge">Dockerfile</code> will setup our development environment from scratch and the <code class="highlighter-rouge">docker-compose.yml</code> will make sure that our NPM dependencies are installed, the development server is started up and we can get to work.</p>

<p>Here is the <code class="highlighter-rouge">Dockerfile</code> and here’s what it does:</p>

<ul>
  <li>Base Operating System - Ubuntu 18.04 LTS</li>
  <li>Default Terminal - Bash</li>
  <li>Update the system and make it ready for installing dependencies</li>
  <li>Install Jekyll dependencies</li>
  <li>Configure Ruby and make <code class="highlighter-rouge">gem</code> available from the command line</li>
  <li>Install Jekyll and Bundler</li>
</ul>

<p>Here are some optional steps. I have Node and NPM setup to run the development server and create a build if needed:</p>

<ul>
  <li>Install Node and NPM</li>
  <li>Expose port 4000 (since Jekyll runs on that port)</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FROM ubuntu:18.04

SHELL ["/bin/bash", "-c"]

RUN apt-get update &amp;&amp; apt-get upgrade -y

RUN apt-get install curl ruby-full build-essential zlib1g-dev -y

RUN echo '# Install Ruby Gems to ~/gems' &gt;&gt; ~/.bashrc &amp;&amp; \
  echo 'export GEM_HOME="$HOME/gems"' &gt;&gt; ~/.bashrc &amp;&amp; \
  echo 'export PATH="$HOME/gems/bin:$PATH"' &gt;&gt; ~/.bashrc &amp;&amp; \
  source ~/.bashrc

RUN gem install jekyll bundler &amp;&amp; gem update --system

# Optional (Installing Node and NPM)
RUN curl -sSL "https://nodejs.org/dist/v12.13.1/node-v12.13.1-linux-x64.tar.xz" | tar --strip-components=2 -xJ -C /usr/local/bin/ node-v12.13.1-linux-x64/bin/node &amp;&amp; \
  curl https://www.npmjs.com/install.sh | bash

EXPOSE 4000
</code></pre></div></div>

<p>With the file above, a working Jekyll environment should be setup. Now, we want to map our Jekyll Site to this working environment and start the server. This is where the <code class="highlighter-rouge">docker-compose.yml</code> comes in. Here are the steps in brief:</p>

<ul>
  <li>Setup an <code class="highlighter-rouge">app</code> container</li>
  <li>Map the Jekyll site on your computer using the <code class="highlighter-rouge">volumes</code> key</li>
  <li>Map the port on your local machine to the Docker container (port <code class="highlighter-rouge">4000</code>)</li>
  <li>Start the development server</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: '3.6'
services:

  app:
    container_name: docker_kunalnagar.in
    build: .
    volumes:
      - .:/var/www/html
    working_dir: /var/www/html
    ports:
      - 4000:4000
    restart: always
    command: &gt;
      sh -c "bundle install &amp;&amp;
            npm install &amp;&amp;
            npm run dev"
</code></pre></div></div>

<h3 id="step-3">Step 3</h3>

<p>All you need to do is run <code class="highlighter-rouge">docker-compose up -d</code> and you’re ready to start working on your Jekyll site at <code class="highlighter-rouge">http://localhost:4000</code></p>

<h3 id="notes">Notes</h3>

<p>If you run into issues, you can use the following commands to inspect your container:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># See a LIVE view of your Docker container's logs
docker logs -f &lt;container_name&gt;

# Login to your Docker container and browser around
docker exec -ti &lt;container_name&gt; bash
</code></pre></div></div>

<p>The code for this website is hosted <a href="https://github.com/kunalnagar/kunalnagar.in">here</a> if you want to take a look at the big picture and how it all comes together.</p>

<h3 id="next-steps">Next steps</h3>

<p>Currently, this site is built on <a href="https://travis-ci.com/kunalnagar/kunalnagar.in">Travis</a> with a different configuration than what I have on Docker. Now that I have a development environment set up, I’d like to deploy the same using Travis.</p>
</article>
      </div>
      <footer>
  <link
    href="https://fonts.googleapis.com/css?family=Lato:700|Noto+Sans:400,700&display=swap"
    rel="stylesheet"
  />
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-51202219-2']);
    _gaq.push(['_trackPageview']);
    (function () {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src =
        ('https:' == document.location.protocol
          ? 'https://ssl'
          : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script src="/assets/js/main.js"></script>
</footer>

    </main>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/css/lightbox.min.css"
    />
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"
      async
      defer
    ></script>
  </body>
</html>
